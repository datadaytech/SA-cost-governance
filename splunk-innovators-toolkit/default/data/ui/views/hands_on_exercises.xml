<dashboard version="1.1" script="js/sit-toolkit.js" stylesheet="css/sit-theme.css,css/sit-components.css">
  <label>Hands-On Exercises</label>
  <description>Practice applying what you've learned by writing code and seeing it run</description>

  <row>
    <panel>
      <html>
        <style>
          /* ========================================
             PAGE LAYOUT
             ======================================== */
          .exercises-page {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
          }

          .hero-section {
            text-align: center;
            padding: 60px 40px;
            background: linear-gradient(135deg, rgba(253, 24, 117, 0.15) 0%, rgba(99, 102, 241, 0.15) 100%);
            border-radius: 24px;
            margin-bottom: 40px;
            border: 1px solid rgba(253, 24, 117, 0.3);
          }

          .hero-section h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin: 0 0 16px 0;
            background: linear-gradient(135deg, #FD1875 0%, #6366F1 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
          }

          .hero-section p {
            color: var(--sit-text-secondary);
            font-size: 1.125rem;
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.7;
          }

          /* ========================================
             EXERCISE CARDS
             ======================================== */
          .exercise-card {
            background: linear-gradient(180deg, var(--sit-bg-medium) 0%, var(--sit-bg-dark) 100%);
            border: 1px solid var(--sit-border-color);
            border-radius: 20px;
            padding: 32px;
            margin-bottom: 32px;
            position: relative;
            overflow: hidden;
          }

          .exercise-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #FD1875 0%, #6366F1 100%);
          }

          .exercise-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 20px;
          }

          .exercise-number {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, #FD1875 0%, #6366F1 100%);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: 700;
            color: white;
            flex-shrink: 0;
          }

          .exercise-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin: 0;
          }

          .exercise-description {
            color: var(--sit-text-secondary);
            font-size: 1rem;
            line-height: 1.7;
            margin-bottom: 24px;
          }

          /* ========================================
             TASK BOX
             ======================================== */
          .task-box {
            background: rgba(99, 102, 241, 0.1);
            border: 1px solid rgba(99, 102, 241, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 24px;
          }

          .task-box-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 12px;
            color: #818CF8;
            font-weight: 600;
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
          }

          .task-box p {
            margin: 0;
            color: var(--sit-text-primary);
            line-height: 1.6;
          }

          .task-box code {
            background: rgba(255, 255, 255, 0.1);
            padding: 2px 8px;
            border-radius: 4px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.9em;
            color: #C084FC;
          }

          /* ========================================
             CODE EDITOR
             ======================================== */
          .editor-container {
            background: #0D1117;
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid #30363D;
          }

          .editor-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 16px;
            background: #161B22;
            border-bottom: 1px solid #30363D;
          }

          .editor-dots {
            display: flex;
            gap: 8px;
          }

          .editor-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
          }

          .editor-dot.red { background: #FF5F56; }
          .editor-dot.yellow { background: #FFBD2E; }
          .editor-dot.green { background: #27CA40; }

          .editor-label {
            font-size: 0.75rem;
            color: #8B949E;
            font-family: 'Monaco', 'Menlo', monospace;
          }

          .code-editor {
            width: 100%;
            min-height: 180px;
            padding: 20px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', monospace;
            font-size: 14px;
            line-height: 1.6;
            background: #0D1117;
            color: #E6EDF3;
            border: none;
            resize: vertical;
            tab-size: 2;
          }

          .code-editor:focus {
            outline: none;
          }

          .code-editor::placeholder {
            color: #484F58;
          }

          /* ========================================
             BUTTONS
             ======================================== */
          .button-row {
            display: flex;
            gap: 12px;
            margin-top: 20px;
            flex-wrap: wrap;
          }

          .btn-run {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 24px;
            background: linear-gradient(135deg, #FD1875 0%, #E91E63 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 4px 12px rgba(253, 24, 117, 0.3);
          }

          .btn-run:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(253, 24, 117, 0.4);
          }

          .btn-hint {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 24px;
            background: rgba(99, 102, 241, 0.15);
            color: #818CF8;
            border: 1px solid rgba(99, 102, 241, 0.3);
            border-radius: 10px;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
          }

          .btn-hint:hover {
            background: rgba(99, 102, 241, 0.25);
            border-color: rgba(99, 102, 241, 0.5);
          }

          .btn-reset {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 24px;
            background: transparent;
            color: var(--sit-text-secondary);
            border: 1px solid var(--sit-border-color);
            border-radius: 10px;
            font-size: 0.95rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
          }

          .btn-reset:hover {
            background: var(--sit-bg-light);
            color: var(--sit-text-primary);
          }

          .hint-counter {
            font-size: 0.75rem;
            background: rgba(255, 255, 255, 0.2);
            padding: 2px 8px;
            border-radius: 10px;
            margin-left: 4px;
          }

          /* ========================================
             OUTPUT AREA
             ======================================== */
          .output-container {
            margin-top: 24px;
            display: none;
          }

          .output-container.show {
            display: block;
            animation: slideUp 0.4s ease;
          }

          @keyframes slideUp {
            from {
              opacity: 0;
              transform: translateY(20px);
            }
            to {
              opacity: 1;
              transform: translateY(0);
            }
          }

          .output-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 12px;
            color: var(--sit-success);
            font-weight: 600;
          }

          .output-box {
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid rgba(34, 197, 94, 0.3);
            border-radius: 12px;
            padding: 20px;
          }

          .output-message {
            color: var(--sit-text-primary);
            line-height: 1.6;
          }

          /* ========================================
             ERROR STATE
             ======================================== */
          .error-container {
            margin-top: 16px;
            display: none;
          }

          .error-container.show {
            display: block;
            animation: shake 0.4s ease;
          }

          @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
          }

          .error-box {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            border-radius: 12px;
            padding: 16px 20px;
            color: #F87171;
            display: flex;
            align-items: flex-start;
            gap: 12px;
          }

          /* ========================================
             PROGRESS SECTION
             ======================================== */
          .progress-section {
            background: linear-gradient(180deg, var(--sit-bg-medium) 0%, var(--sit-bg-dark) 100%);
            border: 1px solid var(--sit-border-color);
            border-radius: 20px;
            padding: 40px;
            text-align: center;
          }

          .progress-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 8px;
          }

          .progress-subtitle {
            color: var(--sit-text-secondary);
            margin-bottom: 32px;
          }

          .progress-badges {
            display: flex;
            justify-content: center;
            gap: 24px;
            margin-bottom: 24px;
          }

          .progress-badge {
            width: 80px;
            height: 80px;
            border-radius: 20px;
            border: 3px solid var(--sit-border-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--sit-text-muted);
            transition: all 0.3s ease;
            background: var(--sit-bg-dark);
          }

          .progress-badge.complete {
            border-color: var(--sit-success);
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.2) 0%, rgba(34, 197, 94, 0.1) 100%);
            color: var(--sit-success);
          }

          .all-complete {
            display: none;
            animation: celebrate 0.6s ease;
          }

          .all-complete.show {
            display: block;
          }

          @keyframes celebrate {
            0% { transform: scale(0.8); opacity: 0; }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); opacity: 1; }
          }

          .celebration-icon {
            font-size: 64px;
            margin-bottom: 16px;
          }

          .celebration-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--sit-success);
            margin-bottom: 8px;
          }

          .celebration-message {
            color: var(--sit-text-secondary);
          }
        </style>

        <div class="exercises-page">
          <div class="hero-section">
            <h1>Hands-On Exercises</h1>
            <p>Put your knowledge to the test! Write JavaScript code in the editors below and click "Run Code" to see your components come to life.</p>
          </div>
        </div>
      </html>
    </panel>
  </row>

  <!-- Exercise 1: Toast Notification -->
  <row>
    <panel>
      <html>
        <div class="exercises-page">
          <div class="exercise-card">
            <div class="exercise-header">
              <div class="exercise-number">1</div>
              <h2 class="exercise-title">Show a Toast Notification</h2>
            </div>

            <p class="exercise-description">
              Toast notifications provide quick feedback to users. They appear briefly and then fade away automatically.
              Your goal is to create a success toast that congratulates the user.
            </p>

            <div class="task-box">
              <div class="task-box-header">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
                </svg>
                Your Task
              </div>
              <p>Show a <code>success</code> toast with title <code>"Well Done!"</code> and message <code>"You completed your first exercise!"</code></p>
            </div>

            <div class="editor-container">
              <div class="editor-header">
                <div class="editor-dots">
                  <div class="editor-dot red"></div>
                  <div class="editor-dot yellow"></div>
                  <div class="editor-dot green"></div>
                </div>
                <span class="editor-label">script.js</span>
              </div>
              <textarea class="code-editor" id="ex1-code" placeholder="// Start typing your code here...">toast.show({

});</textarea>
            </div>

            <div class="button-row">
              <button class="btn-run" id="ex1-run">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M8 5v14l11-7z"/>
                </svg>
                Run Code
              </button>
              <button class="btn-hint" id="ex1-hint">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"/>
                  <path d="M9.09 9a3 3 0 015.83 1c0 2-3 3-3 3M12 17h.01"/>
                </svg>
                Hint <span class="hint-counter" id="ex1-hint-count">0/2</span>
              </button>
              <button class="btn-reset" id="ex1-reset">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M3 12a9 9 0 109-9 9.75 9.75 0 00-6.74 2.74L3 8"/>
                  <path d="M3 3v5h5"/>
                </svg>
                Reset
              </button>
            </div>

            <div class="error-container" id="ex1-error">
              <div class="error-box">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
                </svg>
                <span id="ex1-error-text"></span>
              </div>
            </div>

            <div class="output-container" id="ex1-output">
              <div class="output-header">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                </svg>
                Exercise Complete!
              </div>
              <div class="output-box">
                <p class="output-message">Your toast notification appeared in the top-right corner. You've learned how to provide user feedback with toast messages!</p>
              </div>
            </div>
          </div>
        </div>
      </html>
    </panel>
  </row>

  <!-- Exercise 2: Modal Dialog -->
  <row>
    <panel>
      <html>
        <div class="exercises-page">
          <div class="exercise-card">
            <div class="exercise-header">
              <div class="exercise-number">2</div>
              <h2 class="exercise-title">Open a Modal Dialog</h2>
            </div>

            <p class="exercise-description">
              Modals are overlay windows that focus user attention on important content or actions.
              They're perfect for confirmations, forms, or displaying detailed information.
            </p>

            <div class="task-box">
              <div class="task-box-header">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
                </svg>
                Your Task
              </div>
              <p>Create a modal with title <code>"Welcome!"</code> and body <code>"This is my first modal."</code> then call <code>.open()</code></p>
            </div>

            <div class="editor-container">
              <div class="editor-header">
                <div class="editor-dots">
                  <div class="editor-dot red"></div>
                  <div class="editor-dot yellow"></div>
                  <div class="editor-dot green"></div>
                </div>
                <span class="editor-label">script.js</span>
              </div>
              <textarea class="code-editor" id="ex2-code" placeholder="// Start typing your code here...">var modal = new SITModal({

});
</textarea>
            </div>

            <div class="button-row">
              <button class="btn-run" id="ex2-run">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M8 5v14l11-7z"/>
                </svg>
                Run Code
              </button>
              <button class="btn-hint" id="ex2-hint">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"/>
                  <path d="M9.09 9a3 3 0 015.83 1c0 2-3 3-3 3M12 17h.01"/>
                </svg>
                Hint <span class="hint-counter" id="ex2-hint-count">0/2</span>
              </button>
              <button class="btn-reset" id="ex2-reset">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M3 12a9 9 0 109-9 9.75 9.75 0 00-6.74 2.74L3 8"/>
                  <path d="M3 3v5h5"/>
                </svg>
                Reset
              </button>
            </div>

            <div class="error-container" id="ex2-error">
              <div class="error-box">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
                </svg>
                <span id="ex2-error-text"></span>
              </div>
            </div>

            <div class="output-container" id="ex2-output">
              <div class="output-header">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                </svg>
                Exercise Complete!
              </div>
              <div class="output-box">
                <p class="output-message">Your modal appeared with custom content! Modals are great for focusing user attention on important information or actions.</p>
              </div>
            </div>
          </div>
        </div>
      </html>
    </panel>
  </row>

  <!-- Exercise 3: Confirm Dialog -->
  <row>
    <panel>
      <html>
        <div class="exercises-page">
          <div class="exercise-card">
            <div class="exercise-header">
              <div class="exercise-number">3</div>
              <h2 class="exercise-title">Create a Confirmation Dialog</h2>
            </div>

            <p class="exercise-description">
              Confirmation dialogs ask users to confirm an action. They're essential for destructive actions
              or important decisions. You'll handle both the confirm and cancel responses.
            </p>

            <div class="task-box">
              <div class="task-box-header">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
                </svg>
                Your Task
              </div>
              <p>Use <code>SITModal.confirm()</code> to ask <code>"Do you like this toolkit?"</code> - show a success toast on OK, info toast on Cancel</p>
            </div>

            <div class="editor-container">
              <div class="editor-header">
                <div class="editor-dots">
                  <div class="editor-dot red"></div>
                  <div class="editor-dot yellow"></div>
                  <div class="editor-dot green"></div>
                </div>
                <span class="editor-label">script.js</span>
              </div>
              <textarea class="code-editor" id="ex3-code" placeholder="// Start typing your code here...">SITModal.confirm(
  '',
  function() {
    // On confirm
  },
  function() {
    // On cancel
  }
);</textarea>
            </div>

            <div class="button-row">
              <button class="btn-run" id="ex3-run">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M8 5v14l11-7z"/>
                </svg>
                Run Code
              </button>
              <button class="btn-hint" id="ex3-hint">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"/>
                  <path d="M9.09 9a3 3 0 015.83 1c0 2-3 3-3 3M12 17h.01"/>
                </svg>
                Hint <span class="hint-counter" id="ex3-hint-count">0/2</span>
              </button>
              <button class="btn-reset" id="ex3-reset">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M3 12a9 9 0 109-9 9.75 9.75 0 00-6.74 2.74L3 8"/>
                  <path d="M3 3v5h5"/>
                </svg>
                Reset
              </button>
            </div>

            <div class="error-container" id="ex3-error">
              <div class="error-box">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
                </svg>
                <span id="ex3-error-text"></span>
              </div>
            </div>

            <div class="output-container" id="ex3-output">
              <div class="output-header">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                </svg>
                Exercise Complete!
              </div>
              <div class="output-box">
                <p class="output-message">You handled both user responses! Confirmation dialogs help prevent accidental actions and give users control over important decisions.</p>
              </div>
            </div>
          </div>
        </div>
      </html>
    </panel>
  </row>

  <!-- Progress Section -->
  <row>
    <panel>
      <html>
        <div class="exercises-page">
          <div class="progress-section">
            <div id="progress-tracker">
              <h3 class="progress-title">Your Progress</h3>
              <p class="progress-subtitle">Complete all 3 exercises to master the basics!</p>
              <div class="progress-badges">
                <div class="progress-badge" id="badge-1">1</div>
                <div class="progress-badge" id="badge-2">2</div>
                <div class="progress-badge" id="badge-3">3</div>
              </div>
            </div>
            <div class="all-complete" id="all-complete">
              <div class="celebration-icon">ðŸŽ‰</div>
              <h3 class="celebration-title">Congratulations!</h3>
              <p class="celebration-message">You've completed all exercises and mastered the basics of the Splunk Innovators Toolkit!</p>
            </div>
          </div>
        </div>

        <script>
          require([
            'jquery',
            'underscore',
            '/static/app/splunk-innovators-toolkit/components/sit-modal.js',
            '/static/app/splunk-innovators-toolkit/components/sit-toast.js'
          ], function($, _, SITModal, SITToast) {

            var toast = new SITToast();
            var completed = { ex1: false, ex2: false, ex3: false };

            // Hint progressions for each exercise
            var hints = {
              ex1: {
                count: 0,
                steps: [
                  "toast.show({\n  type: 'success'\n});",
                  "toast.show({\n  type: 'success',\n  title: 'Well Done!'\n});",
                  "toast.show({\n  type: 'success',\n  title: 'Well Done!',\n  message: 'You completed your first exercise!'\n});"
                ]
              },
              ex2: {
                count: 0,
                steps: [
                  "var modal = new SITModal({\n  title: 'Welcome!'\n});\n",
                  "var modal = new SITModal({\n  title: 'Welcome!',\n  body: 'This is my first modal.'\n});\n",
                  "var modal = new SITModal({\n  title: 'Welcome!',\n  body: 'This is my first modal.'\n});\nmodal.open();"
                ]
              },
              ex3: {
                count: 0,
                steps: [
                  "SITModal.confirm(\n  'Do you like this toolkit?',\n  function() {\n    // On confirm\n  },\n  function() {\n    // On cancel\n  }\n);",
                  "SITModal.confirm(\n  'Do you like this toolkit?',\n  function() {\n    toast.show({ type: 'success', title: 'Thanks!' });\n  },\n  function() {\n    // On cancel\n  }\n);",
                  "SITModal.confirm(\n  'Do you like this toolkit?',\n  function() {\n    toast.show({ type: 'success', title: 'Thanks!', message: 'We appreciate it!' });\n  },\n  function() {\n    toast.show({ type: 'info', title: 'No problem!', message: 'Thanks for trying!' });\n  }\n);"
                ]
              }
            };

            var defaults = {
              ex1: "toast.show({\n  \n});",
              ex2: "var modal = new SITModal({\n  \n});\n",
              ex3: "SITModal.confirm(\n  '',\n  function() {\n    // On confirm\n  },\n  function() {\n    // On cancel\n  }\n);"
            };

            function updateProgress() {
              ['ex1', 'ex2', 'ex3'].forEach(function(ex, i) {
                var $badge = $('#badge-' + (i + 1));
                if (completed[ex]) {
                  $badge.addClass('complete').html('âœ“');
                }
              });

              if (completed.ex1 &amp;&amp; completed.ex2 &amp;&amp; completed.ex3) {
                $('#progress-tracker').hide();
                $('#all-complete').addClass('show');
              }
            }

            function executeCode(code) {
              try {
                var fn = new Function('toast', 'SITModal', '_', '$', code);
                fn(toast, SITModal, _, $);
                return { success: true };
              } catch (e) {
                return { success: false, error: e.message };
              }
            }

            function updateHintCounter(ex) {
              var h = hints[ex];
              $('#' + ex + '-hint-count').text(h.count + '/2');
            }

            // ========== Exercise 1 ==========
            $('#ex1-hint').on('click', function() {
              var h = hints.ex1;
              h.count = Math.min(h.count + 1, 2);
              updateHintCounter('ex1');

              $('#ex1-code').val(h.steps[h.count]);

              if (h.count >= 2) {
                // Auto-execute on final hint
                setTimeout(function() {
                  $('#ex1-run').click();
                }, 300);
              }
            });

            $('#ex1-reset').on('click', function() {
              $('#ex1-code').val(defaults.ex1);
              $('#ex1-output').removeClass('show');
              $('#ex1-error').removeClass('show');
              hints.ex1.count = 0;
              updateHintCounter('ex1');
            });

            $('#ex1-run').on('click', function() {
              var code = $('#ex1-code').val();
              $('#ex1-error').removeClass('show');
              $('#ex1-output').removeClass('show');

              var result = executeCode(code);

              if (!result.success) {
                $('#ex1-error-text').text(result.error);
                $('#ex1-error').addClass('show');
                return;
              }

              if (code.includes("'success'") || code.includes('"success"')) {
                completed.ex1 = true;
                $('#ex1-output').addClass('show');
                updateProgress();
              }
            });

            // ========== Exercise 2 ==========
            $('#ex2-hint').on('click', function() {
              var h = hints.ex2;
              h.count = Math.min(h.count + 1, 2);
              updateHintCounter('ex2');

              $('#ex2-code').val(h.steps[h.count]);

              if (h.count >= 2) {
                setTimeout(function() {
                  $('#ex2-run').click();
                }, 300);
              }
            });

            $('#ex2-reset').on('click', function() {
              $('#ex2-code').val(defaults.ex2);
              $('#ex2-output').removeClass('show');
              $('#ex2-error').removeClass('show');
              hints.ex2.count = 0;
              updateHintCounter('ex2');
            });

            $('#ex2-run').on('click', function() {
              var code = $('#ex2-code').val();
              $('#ex2-error').removeClass('show');
              $('#ex2-output').removeClass('show');

              var result = executeCode(code);

              if (!result.success) {
                $('#ex2-error-text').text(result.error);
                $('#ex2-error').addClass('show');
                return;
              }

              setTimeout(function() {
                if ($('.sit-modal-backdrop').length > 0) {
                  completed.ex2 = true;
                  $('#ex2-output').addClass('show');
                  updateProgress();
                }
              }, 200);
            });

            // ========== Exercise 3 ==========
            $('#ex3-hint').on('click', function() {
              var h = hints.ex3;
              h.count = Math.min(h.count + 1, 2);
              updateHintCounter('ex3');

              $('#ex3-code').val(h.steps[h.count]);

              if (h.count >= 2) {
                setTimeout(function() {
                  $('#ex3-run').click();
                }, 300);
              }
            });

            $('#ex3-reset').on('click', function() {
              $('#ex3-code').val(defaults.ex3);
              $('#ex3-output').removeClass('show');
              $('#ex3-error').removeClass('show');
              hints.ex3.count = 0;
              updateHintCounter('ex3');
            });

            $('#ex3-run').on('click', function() {
              var code = $('#ex3-code').val();
              $('#ex3-error').removeClass('show');
              $('#ex3-output').removeClass('show');

              var result = executeCode(code);

              if (!result.success) {
                $('#ex3-error-text').text(result.error);
                $('#ex3-error').addClass('show');
                return;
              }

              if (code.includes('SITModal.confirm') &amp;&amp; code.includes('toast.show')) {
                var checkComplete = setInterval(function() {
                  if ($('.sit-modal-backdrop').length === 0) {
                    clearInterval(checkComplete);
                    completed.ex3 = true;
                    $('#ex3-output').addClass('show');
                    updateProgress();
                  }
                }, 300);

                setTimeout(function() {
                  clearInterval(checkComplete);
                }, 30000);
              }
            });

          });
        </script>
      </html>
    </panel>
  </row>

</dashboard>

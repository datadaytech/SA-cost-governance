<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TA-user-governance | Scheduled Search Governance</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: #ffffff;
        }

        /* Header */
        .header {
            background: rgba(0, 0, 0, 0.4);
            border-bottom: 2px solid #00d4ff;
            padding: 16px 32px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            backdrop-filter: blur(10px);
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .logo {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #00d4ff, #0099cc);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 18px;
        }

        .header h1 {
            font-size: 22px;
            font-weight: 700;
            color: #00d4ff;
            text-shadow: 0 0 30px rgba(0, 212, 255, 0.5);
        }

        .header-subtitle {
            font-size: 13px;
            color: rgba(255, 255, 255, 0.6);
        }

        .nav-tabs {
            display: flex;
            gap: 8px;
        }

        .nav-tab {
            padding: 8px 20px;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid transparent;
        }

        .nav-tab.active {
            background: rgba(0, 212, 255, 0.2);
            border-color: rgba(0, 212, 255, 0.4);
            color: #00d4ff;
        }

        .nav-tab:not(.active):hover {
            background: rgba(255, 255, 255, 0.1);
        }

        /* Main Content */
        .main {
            padding: 24px 32px;
            max-width: 1600px;
            margin: 0 auto;
        }

        /* Metrics Row */
        .metrics-row {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 20px;
            margin-bottom: 24px;
        }

        .metric-card {
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.08) 0%, rgba(255, 255, 255, 0.02) 100%);
            border-radius: 16px;
            padding: 24px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            text-align: center;
            transition: all 0.3s ease;
        }

        .metric-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.3);
            border-color: rgba(0, 212, 255, 0.3);
        }

        .metric-value {
            font-size: 48px;
            font-weight: 800;
            margin-bottom: 8px;
            line-height: 1;
        }

        .metric-label {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.6);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
        }

        .metric-trend {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.5);
        }

        .trend-up { color: #ff6b6b; }
        .trend-down { color: #6bcb77; }

        .glow-blue { color: #00d4ff; text-shadow: 0 0 30px rgba(0, 212, 255, 0.6); }
        .glow-red { color: #ff6b6b; text-shadow: 0 0 30px rgba(255, 107, 107, 0.6); }
        .glow-yellow { color: #ffd93d; text-shadow: 0 0 30px rgba(255, 217, 61, 0.6); }
        .glow-green { color: #6bcb77; text-shadow: 0 0 30px rgba(107, 203, 119, 0.6); }

        /* Alert Banner */
        .alert-banner {
            background: linear-gradient(135deg, rgba(220, 78, 65, 0.15) 0%, rgba(220, 78, 65, 0.05) 100%);
            border: 1px solid rgba(220, 78, 65, 0.3);
            border-radius: 12px;
            padding: 20px 24px;
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .alert-content {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .alert-icon {
            width: 48px;
            height: 48px;
            background: #dc4e41;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(220, 78, 65, 0.4); }
            50% { box-shadow: 0 0 0 15px rgba(220, 78, 65, 0); }
        }

        .alert-text h3 {
            color: #ff6b6b;
            font-size: 16px;
            margin-bottom: 4px;
        }

        .alert-text p {
            color: rgba(255, 255, 255, 0.7);
            font-size: 13px;
        }

        .alert-actions {
            display: flex;
            gap: 10px;
        }

        /* Buttons */
        .btn {
            padding: 10px 24px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s;
            border: none;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #00d4ff 0%, #0099cc 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 212, 255, 0.4);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        .btn-danger {
            background: linear-gradient(135deg, #dc4e41 0%, #b33a30 100%);
            color: white;
        }

        .btn-danger:hover {
            box-shadow: 0 8px 25px rgba(220, 78, 65, 0.4);
        }

        .btn-purple {
            background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%);
            color: white;
        }

        .btn-green {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
        }

        /* Panels */
        .panel {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 24px;
            overflow: hidden;
        }

        .panel-header {
            padding: 16px 20px;
            background: linear-gradient(90deg, rgba(0, 212, 255, 0.1) 0%, transparent 100%);
            border-left: 3px solid #00d4ff;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .panel-header.alert {
            border-left-color: #dc4e41;
            background: linear-gradient(90deg, rgba(220, 78, 65, 0.1) 0%, transparent 100%);
        }

        .panel-header.warning {
            border-left-color: #f8be34;
            background: linear-gradient(90deg, rgba(248, 190, 52, 0.1) 0%, transparent 100%);
        }

        .panel-title {
            font-size: 14px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .panel-body {
            padding: 0;
        }

        .panel-footer {
            padding: 16px 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
        }

        th {
            background: rgba(0, 212, 255, 0.1);
            color: #00d4ff;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            padding: 14px 16px;
            text-align: left;
        }

        td {
            padding: 14px 16px;
            font-size: 13px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        tr:hover {
            background: rgba(0, 212, 255, 0.08);
        }

        .row-num {
            color: rgba(255, 255, 255, 0.4);
            font-size: 12px;
            width: 40px;
        }

        /* Status Badges */
        .badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .badge-critical { background: rgba(220, 78, 65, 0.2); color: #ff6b6b; border: 1px solid rgba(220, 78, 65, 0.4); }
        .badge-warning { background: rgba(248, 190, 52, 0.2); color: #ffd93d; border: 1px solid rgba(248, 190, 52, 0.4); }
        .badge-success { background: rgba(83, 160, 81, 0.2); color: #6bcb77; border: 1px solid rgba(83, 160, 81, 0.4); }
        .badge-info { background: rgba(0, 212, 255, 0.2); color: #00d4ff; border: 1px solid rgba(0, 212, 255, 0.4); }
        .badge-purple { background: rgba(99, 102, 241, 0.2); color: #a5b4fc; border: 1px solid rgba(99, 102, 241, 0.4); }

        /* Clickable Cron Badge */
        .cron-badge {
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }

        .cron-badge:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(0, 212, 255, 0.3);
        }

        .cron-badge::after {
            content: '✎';
            position: absolute;
            right: -18px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 12px;
            opacity: 0;
            transition: opacity 0.2s;
        }

        .cron-badge:hover::after {
            opacity: 0.7;
        }

        /* Runtime Indicator */
        .runtime-bar {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .runtime-value {
            font-weight: 600;
            min-width: 50px;
        }

        .runtime-fill {
            flex: 1;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            overflow: hidden;
            max-width: 80px;
        }

        .runtime-fill-inner {
            height: 100%;
            border-radius: 3px;
            transition: width 0.5s ease;
        }

        .runtime-critical .runtime-value { color: #ff6b6b; }
        .runtime-critical .runtime-fill-inner { background: linear-gradient(90deg, #dc4e41, #ff6b6b); }

        .runtime-warning .runtime-value { color: #ffd93d; }
        .runtime-warning .runtime-fill-inner { background: linear-gradient(90deg, #f8be34, #ffd93d); }

        .runtime-ok .runtime-value { color: #6bcb77; }
        .runtime-ok .runtime-fill-inner { background: linear-gradient(90deg, #53a051, #6bcb77); }

        /* Two Column Layout */
        .two-col {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
        }

        /* Stats Footer */
        .stats-footer {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 24px;
            padding: 32px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 24px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-label {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.5);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 12px;
        }

        .stat-value {
            font-size: 36px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .stat-trend {
            font-size: 12px;
        }

        .progress-bar {
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            margin-top: 12px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            border-radius: 3px;
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 24px;
            color: rgba(255, 255, 255, 0.4);
            font-size: 12px;
        }

        .footer span {
            color: #00d4ff;
            font-weight: 600;
        }

        /* Modal Overlay */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(8px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        /* Modal */
        .modal {
            background: linear-gradient(145deg, #1e2a3a 0%, #162032 100%);
            border-radius: 20px;
            border: 1px solid rgba(0, 212, 255, 0.3);
            width: 90%;
            max-width: 700px;
            max-height: 90vh;
            overflow: hidden;
            transform: scale(0.9) translateY(20px);
            transition: all 0.3s ease;
            box-shadow: 0 25px 80px rgba(0, 0, 0, 0.5), 0 0 60px rgba(0, 212, 255, 0.1);
        }

        .modal-overlay.active .modal {
            transform: scale(1) translateY(0);
        }

        .modal-header {
            padding: 24px 28px;
            background: linear-gradient(90deg, rgba(0, 212, 255, 0.15) 0%, transparent 100%);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h2 {
            font-size: 18px;
            font-weight: 700;
            color: #00d4ff;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .modal-header h2 svg {
            width: 24px;
            height: 24px;
        }

        .modal-close {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-close:hover {
            background: rgba(220, 78, 65, 0.3);
            color: #ff6b6b;
        }

        .modal-body {
            padding: 28px;
            overflow-y: auto;
            max-height: calc(90vh - 180px);
        }

        .modal-footer {
            padding: 20px 28px;
            background: rgba(0, 0, 0, 0.2);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* Search Info */
        .search-info {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 16px 20px;
            margin-bottom: 24px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .search-info-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .search-info-row:last-child {
            margin-bottom: 0;
        }

        .search-info-label {
            color: rgba(255, 255, 255, 0.5);
            font-size: 12px;
        }

        .search-info-value {
            font-weight: 600;
            font-size: 13px;
        }

        /* Cron Builder */
        .cron-builder {
            margin-bottom: 24px;
        }

        .cron-section-title {
            font-size: 13px;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Quick Presets */
        .preset-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-bottom: 24px;
        }

        .preset-btn {
            padding: 14px 12px;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
        }

        .preset-btn:hover {
            background: rgba(0, 212, 255, 0.15);
            border-color: rgba(0, 212, 255, 0.4);
        }

        .preset-btn.active {
            background: rgba(0, 212, 255, 0.2);
            border-color: #00d4ff;
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.2);
        }

        .preset-btn .preset-label {
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .preset-btn .preset-cron {
            font-size: 10px;
            color: rgba(255, 255, 255, 0.5);
            font-family: monospace;
        }

        /* Custom Cron Input */
        .cron-input-section {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 24px;
        }

        .cron-fields {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 12px;
            margin-bottom: 16px;
        }

        .cron-field {
            text-align: center;
        }

        .cron-field label {
            display: block;
            font-size: 10px;
            color: rgba(255, 255, 255, 0.5);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 8px;
        }

        .cron-field input, .cron-field select {
            width: 100%;
            padding: 12px 8px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 16px;
            font-family: monospace;
            text-align: center;
            transition: all 0.2s;
        }

        .cron-field input:focus, .cron-field select:focus {
            outline: none;
            border-color: #00d4ff;
            box-shadow: 0 0 15px rgba(0, 212, 255, 0.3);
        }

        .cron-field select option {
            background: #1e2a3a;
            color: white;
        }

        /* Cron Preview */
        .cron-preview {
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.1) 0%, rgba(99, 102, 241, 0.1) 100%);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border: 1px solid rgba(0, 212, 255, 0.3);
        }

        .cron-preview-label {
            font-size: 11px;
            color: rgba(255, 255, 255, 0.5);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
        }

        .cron-preview-value {
            font-size: 28px;
            font-family: monospace;
            font-weight: 700;
            color: #00d4ff;
            text-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
            margin-bottom: 8px;
            letter-spacing: 4px;
        }

        .cron-preview-description {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.8);
        }

        /* Next Runs */
        .next-runs {
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .next-runs-title {
            font-size: 11px;
            color: rgba(255, 255, 255, 0.5);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 12px;
        }

        .next-run-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 0;
            font-size: 13px;
            color: rgba(255, 255, 255, 0.7);
        }

        .next-run-item:before {
            content: '';
            width: 6px;
            height: 6px;
            background: #00d4ff;
            border-radius: 50%;
        }

        /* Impact Warning */
        .impact-warning {
            background: rgba(248, 190, 52, 0.1);
            border: 1px solid rgba(248, 190, 52, 0.3);
            border-radius: 10px;
            padding: 14px 18px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 13px;
            color: #ffd93d;
        }

        .impact-warning svg {
            flex-shrink: 0;
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .metrics-row {
                grid-template-columns: repeat(3, 1fr);
            }
            .two-col {
                grid-template-columns: 1fr;
            }
            .stats-footer {
                grid-template-columns: repeat(2, 1fr);
            }
            .preset-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .metrics-row {
                grid-template-columns: repeat(2, 1fr);
            }
            .header {
                flex-direction: column;
                gap: 16px;
            }
            .alert-banner {
                flex-direction: column;
                gap: 16px;
                text-align: center;
            }
            .alert-content {
                flex-direction: column;
            }
            .cron-fields {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .panel, .metric-card, .alert-banner {
            animation: fadeIn 0.5s ease forwards;
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 16px 24px;
            border-radius: 12px;
            font-weight: 600;
            font-size: 14px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 1001;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }

        .toast svg {
            width: 20px;
            height: 20px;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-left">
            <div class="logo">UG</div>
            <div>
                <h1>Scheduled Search Governance</h1>
                <div class="header-subtitle">Monitor, flag, and enforce policies on scheduled searches</div>
            </div>
        </div>
        <nav class="nav-tabs">
            <div class="nav-tab active">Dashboard</div>
            <div class="nav-tab">Settings</div>
            <div class="nav-tab">Reports</div>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="main">
        <!-- Metrics Row -->
        <div class="metrics-row">
            <div class="metric-card">
                <div class="metric-value glow-blue">247</div>
                <div class="metric-label">Total Scheduled Searches</div>
                <div class="metric-trend">+12 this week</div>
            </div>
            <div class="metric-card">
                <div class="metric-value glow-red">18</div>
                <div class="metric-label">Suspicious Searches</div>
                <div class="metric-trend trend-up">▲ 3 new detected</div>
            </div>
            <div class="metric-card">
                <div class="metric-value glow-yellow">7</div>
                <div class="metric-label">Currently Flagged</div>
                <div class="metric-trend">2 pending notification</div>
            </div>
            <div class="metric-card">
                <div class="metric-value glow-yellow">4</div>
                <div class="metric-label">Pending Remediation</div>
                <div class="metric-trend trend-up">▲ 1 deadline approaching</div>
            </div>
            <div class="metric-card">
                <div class="metric-value glow-green">3</div>
                <div class="metric-label">Auto-Disabled (30d)</div>
                <div class="metric-trend trend-down">▼ 40% vs last month</div>
            </div>
        </div>

        <!-- Alert Banner -->
        <div class="alert-banner">
            <div class="alert-content">
                <div class="alert-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                        <path d="M12 2L1 21h22L12 2zm0 3.5L19.5 19h-15L12 5.5zM11 10v4h2v-4h-2zm0 6v2h2v-2h-2z"/>
                    </svg>
                </div>
                <div class="alert-text">
                    <h3>Action Required</h3>
                    <p>18 scheduled searches require immediate review based on suspicious activity patterns</p>
                </div>
            </div>
            <div class="alert-actions">
                <button class="btn btn-primary">Review Suspicious Searches</button>
                <button class="btn btn-secondary">View All Flagged</button>
            </div>
        </div>

        <!-- Suspicious Searches Table -->
        <div class="panel">
            <div class="panel-header alert">
                <div class="panel-title">Suspicious Scheduled Searches - Requires Review <span style="opacity: 0.6; font-weight: 400;">(Click schedule to edit)</span></div>
            </div>
            <div class="panel-body">
                <table>
                    <thead>
                        <tr>
                            <th class="row-num">#</th>
                            <th>Search Name</th>
                            <th>Owner</th>
                            <th>App</th>
                            <th>Schedule</th>
                            <th>Avg Runtime</th>
                            <th>Runtime Ratio</th>
                            <th>Reason</th>
                            <th>Flagged</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="row-num">1</td>
                            <td><strong>Security_Alert_Monitor</strong></td>
                            <td>admin</td>
                            <td>security_app</td>
                            <td><span class="badge badge-warning cron-badge" onclick="openCronModal('Security_Alert_Monitor', '*/5 * * * *', 'admin', 'security_app')">*/5 * * * *</span></td>
                            <td>4m 32s</td>
                            <td>
                                <div class="runtime-bar runtime-critical">
                                    <span class="runtime-value">90.7%</span>
                                    <div class="runtime-fill"><div class="runtime-fill-inner" style="width: 90%"></div></div>
                                </div>
                            </td>
                            <td>Runtime exceeds 90.7% of interval; High frequency</td>
                            <td><span class="badge badge-success">No</span></td>
                        </tr>
                        <tr>
                            <td class="row-num">2</td>
                            <td><strong>Index_Health_Check</strong></td>
                            <td>svc_splunk</td>
                            <td>_internal</td>
                            <td><span class="badge badge-critical cron-badge" onclick="openCronModal('Index_Health_Check', '*/1 * * * *', 'svc_splunk', '_internal')">*/1 * * * *</span></td>
                            <td>52s</td>
                            <td>
                                <div class="runtime-bar runtime-critical">
                                    <span class="runtime-value">86.7%</span>
                                    <div class="runtime-fill"><div class="runtime-fill-inner" style="width: 86%"></div></div>
                                </div>
                            </td>
                            <td>Runtime exceeds 86.7% of interval; High frequency</td>
                            <td><span class="badge badge-critical">Yes</span></td>
                        </tr>
                        <tr>
                            <td class="row-num">3</td>
                            <td><strong>Network_Traffic_Analysis</strong></td>
                            <td>netops</td>
                            <td>network</td>
                            <td><span class="badge badge-warning cron-badge" onclick="openCronModal('Network_Traffic_Analysis', '*/5 * * * *', 'netops', 'network')">*/5 * * * *</span></td>
                            <td>3m 55s</td>
                            <td>
                                <div class="runtime-bar runtime-critical">
                                    <span class="runtime-value">78.3%</span>
                                    <div class="runtime-fill"><div class="runtime-fill-inner" style="width: 78%"></div></div>
                                </div>
                            </td>
                            <td>Runtime exceeds 78.3%; Contains index=*</td>
                            <td><span class="badge badge-success">No</span></td>
                        </tr>
                        <tr>
                            <td class="row-num">4</td>
                            <td><strong>Error_Rate_Monitor</strong></td>
                            <td>devops</td>
                            <td>monitoring</td>
                            <td><span class="badge badge-critical cron-badge" onclick="openCronModal('Error_Rate_Monitor', '*/1 * * * *', 'devops', 'monitoring')">*/1 * * * *</span></td>
                            <td>48s</td>
                            <td>
                                <div class="runtime-bar runtime-critical">
                                    <span class="runtime-value">80.0%</span>
                                    <div class="runtime-fill"><div class="runtime-fill-inner" style="width: 80%"></div></div>
                                </div>
                            </td>
                            <td>Runtime exceeds 80.0% of interval; High frequency</td>
                            <td><span class="badge badge-success">No</span></td>
                        </tr>
                        <tr>
                            <td class="row-num">5</td>
                            <td><strong>Data_Quality_Check</strong></td>
                            <td>etl_user</td>
                            <td>data_quality</td>
                            <td><span class="badge badge-info cron-badge" onclick="openCronModal('Data_Quality_Check', '*/30 * * * *', 'etl_user', 'data_quality')">*/30 * * * *</span></td>
                            <td>8m 12s</td>
                            <td>
                                <div class="runtime-bar runtime-warning">
                                    <span class="runtime-value">27.3%</span>
                                    <div class="runtime-fill"><div class="runtime-fill-inner" style="width: 27%"></div></div>
                                </div>
                            </td>
                            <td>Runtime exceeds 27.3%; Contains | join</td>
                            <td><span class="badge badge-success">No</span></td>
                        </tr>
                        <tr>
                            <td class="row-num">6</td>
                            <td><strong>Log_Aggregation_Daily</strong></td>
                            <td>admin</td>
                            <td>main_app</td>
                            <td><span class="badge badge-info cron-badge" onclick="openCronModal('Log_Aggregation_Daily', '0 */2 * * *', 'admin', 'main_app')">0 */2 * * *</span></td>
                            <td>18m 45s</td>
                            <td>
                                <div class="runtime-bar runtime-warning">
                                    <span class="runtime-value">15.6%</span>
                                    <div class="runtime-fill"><div class="runtime-fill-inner" style="width: 15%"></div></div>
                                </div>
                            </td>
                            <td>Long average runtime (18.8 min)</td>
                            <td><span class="badge badge-critical">Yes</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="panel-footer">
                <button class="btn btn-primary">Flag Selected Search</button>
                <button class="btn btn-purple">Email Owner</button>
                <button class="btn btn-secondary">Bulk Flag All</button>
            </div>
        </div>

        <!-- Two Column Layout -->
        <div class="two-col">
            <!-- Flagged Searches -->
            <div class="panel">
                <div class="panel-header warning">
                    <div class="panel-title">Flagged Searches - Pending Remediation</div>
                </div>
                <div class="panel-body">
                    <table>
                        <thead>
                            <tr>
                                <th class="row-num">#</th>
                                <th>Search Name</th>
                                <th>Owner</th>
                                <th>Deadline</th>
                                <th>Days Left</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="row-num">1</td>
                                <td><strong>Index_Health_Check</strong></td>
                                <td>svc_splunk</td>
                                <td>Jan 4, 2025</td>
                                <td><span class="badge badge-success">6.2</span></td>
                                <td><span class="badge badge-warning">Awaiting</span></td>
                            </tr>
                            <tr>
                                <td class="row-num">2</td>
                                <td><strong>Log_Aggregation_Daily</strong></td>
                                <td>admin</td>
                                <td>Jan 1, 2025</td>
                                <td><span class="badge badge-critical">0.5</span></td>
                                <td><span class="badge badge-warning">Awaiting</span></td>
                            </tr>
                            <tr>
                                <td class="row-num">3</td>
                                <td><strong>Backup_Verification</strong></td>
                                <td>backup_svc</td>
                                <td>Jan 6, 2025</td>
                                <td><span class="badge badge-success">5.8</span></td>
                                <td><span class="badge badge-info">Pending</span></td>
                            </tr>
                            <tr>
                                <td class="row-num">4</td>
                                <td><strong>License_Usage_Report</strong></td>
                                <td>license_mgr</td>
                                <td>Jan 3, 2025</td>
                                <td><span class="badge badge-warning">2.1</span></td>
                                <td><span class="badge badge-warning">Awaiting</span></td>
                            </tr>
                            <tr>
                                <td class="row-num">5</td>
                                <td><strong>Cache_Cleanup</strong></td>
                                <td>system</td>
                                <td>Dec 27, 2024</td>
                                <td><span class="badge badge-critical">-1.2</span></td>
                                <td><span class="badge badge-critical">Disabled</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="panel-footer">
                    <button class="btn btn-primary">Send Reminder</button>
                    <button class="btn btn-green">Extend Deadline</button>
                    <button class="btn btn-danger">Disable Now</button>
                    <button class="btn btn-secondary">Mark Resolved</button>
                </div>
            </div>

            <!-- Activity Timeline -->
            <div class="panel">
                <div class="panel-header">
                    <div class="panel-title">Recent Governance Activity</div>
                </div>
                <div class="panel-body">
                    <table>
                        <thead>
                            <tr>
                                <th>Time</th>
                                <th>Action</th>
                                <th>Search</th>
                                <th>By</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>09:45:23</td>
                                <td><span class="badge badge-warning">flagged</span></td>
                                <td>Security_Alert_Monitor</td>
                                <td>admin</td>
                            </tr>
                            <tr>
                                <td>09:30:15</td>
                                <td><span class="badge badge-info">notification</span></td>
                                <td>Index_Health_Check</td>
                                <td>system</td>
                            </tr>
                            <tr>
                                <td>08:00:00</td>
                                <td><span class="badge badge-critical">disabled</span></td>
                                <td>Cache_Cleanup</td>
                                <td>system</td>
                            </tr>
                            <tr>
                                <td>Yesterday</td>
                                <td><span class="badge badge-purple">extended</span></td>
                                <td>License_Usage_Report</td>
                                <td>msmith</td>
                            </tr>
                            <tr>
                                <td>Yesterday</td>
                                <td><span class="badge badge-warning">flagged</span></td>
                                <td>Log_Aggregation_Daily</td>
                                <td>jdoe</td>
                            </tr>
                            <tr>
                                <td>Dec 30</td>
                                <td><span class="badge badge-success">resolved</span></td>
                                <td>Report_Generator</td>
                                <td>admin</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Stats Footer -->
        <div class="stats-footer">
            <div class="stat-item">
                <div class="stat-label">Compliance Rate</div>
                <div class="stat-value glow-green">94.2%</div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 94%; background: linear-gradient(90deg, #53a051, #6bcb77);"></div>
                </div>
            </div>
            <div class="stat-item">
                <div class="stat-label">Avg Remediation Time</div>
                <div class="stat-value glow-blue">3.2 days</div>
                <div class="stat-trend trend-down">▼ 18% improvement</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">Searches Optimized</div>
                <div class="stat-value" style="color: #a5b4fc; text-shadow: 0 0 30px rgba(165, 180, 252, 0.6);">127</div>
                <div class="stat-trend">Last 30 days</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">Resource Savings</div>
                <div class="stat-value" style="color: #34d399; text-shadow: 0 0 30px rgba(52, 211, 153, 0.6);">42%</div>
                <div class="stat-trend trend-down">CPU reduction achieved</div>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <div style="margin-bottom: 8px;">
                <span>TA-user-governance</span> v1.0.0
            </div>
            <div>Scheduled Search Governance & Compliance Management | Built for Splunk 8.x+</div>
        </div>
    </main>

    <!-- Cron Schedule Modal -->
    <div class="modal-overlay" id="cronModal">
        <div class="modal">
            <div class="modal-header">
                <h2>
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm.5-13H11v6l5.2 3.2.8-1.3-4.5-2.7V7z"/>
                    </svg>
                    Edit Schedule
                </h2>
                <button class="modal-close" onclick="closeCronModal()">&times;</button>
            </div>
            <div class="modal-body">
                <!-- Search Info -->
                <div class="search-info">
                    <div class="search-info-row">
                        <span class="search-info-label">Search Name</span>
                        <span class="search-info-value" id="modalSearchName">Security_Alert_Monitor</span>
                    </div>
                    <div class="search-info-row">
                        <span class="search-info-label">Owner</span>
                        <span class="search-info-value" id="modalOwner">admin</span>
                    </div>
                    <div class="search-info-row">
                        <span class="search-info-label">App</span>
                        <span class="search-info-value" id="modalApp">security_app</span>
                    </div>
                </div>

                <!-- Quick Presets -->
                <div class="cron-builder">
                    <div class="cron-section-title">Quick Presets</div>
                    <div class="preset-grid">
                        <div class="preset-btn" onclick="selectPreset('0 * * * *', this)">
                            <div class="preset-label">Hourly</div>
                            <div class="preset-cron">0 * * * *</div>
                        </div>
                        <div class="preset-btn" onclick="selectPreset('0 */2 * * *', this)">
                            <div class="preset-label">Every 2 Hours</div>
                            <div class="preset-cron">0 */2 * * *</div>
                        </div>
                        <div class="preset-btn" onclick="selectPreset('0 */4 * * *', this)">
                            <div class="preset-label">Every 4 Hours</div>
                            <div class="preset-cron">0 */4 * * *</div>
                        </div>
                        <div class="preset-btn" onclick="selectPreset('0 */6 * * *', this)">
                            <div class="preset-label">Every 6 Hours</div>
                            <div class="preset-cron">0 */6 * * *</div>
                        </div>
                        <div class="preset-btn" onclick="selectPreset('0 0 * * *', this)">
                            <div class="preset-label">Daily (Midnight)</div>
                            <div class="preset-cron">0 0 * * *</div>
                        </div>
                        <div class="preset-btn" onclick="selectPreset('0 6 * * *', this)">
                            <div class="preset-label">Daily (6 AM)</div>
                            <div class="preset-cron">0 6 * * *</div>
                        </div>
                        <div class="preset-btn" onclick="selectPreset('0 0 * * 0', this)">
                            <div class="preset-label">Weekly</div>
                            <div class="preset-cron">0 0 * * 0</div>
                        </div>
                        <div class="preset-btn" onclick="selectPreset('0 0 1 * *', this)">
                            <div class="preset-label">Monthly</div>
                            <div class="preset-cron">0 0 1 * *</div>
                        </div>
                    </div>
                </div>

                <!-- Custom Cron Input -->
                <div class="cron-input-section">
                    <div class="cron-section-title">Custom Schedule</div>
                    <div class="cron-fields">
                        <div class="cron-field">
                            <label>Minute</label>
                            <input type="text" id="cronMinute" value="*" oninput="updateCronPreview()">
                        </div>
                        <div class="cron-field">
                            <label>Hour</label>
                            <input type="text" id="cronHour" value="*" oninput="updateCronPreview()">
                        </div>
                        <div class="cron-field">
                            <label>Day of Month</label>
                            <input type="text" id="cronDayMonth" value="*" oninput="updateCronPreview()">
                        </div>
                        <div class="cron-field">
                            <label>Month</label>
                            <input type="text" id="cronMonth" value="*" oninput="updateCronPreview()">
                        </div>
                        <div class="cron-field">
                            <label>Day of Week</label>
                            <input type="text" id="cronDayWeek" value="*" oninput="updateCronPreview()">
                        </div>
                    </div>
                </div>

                <!-- Cron Preview -->
                <div class="cron-preview">
                    <div class="cron-preview-label">Cron Expression</div>
                    <div class="cron-preview-value" id="cronPreviewValue">* * * * *</div>
                    <div class="cron-preview-description" id="cronDescription">Runs every minute</div>

                    <div class="next-runs">
                        <div class="next-runs-title">Next 3 Scheduled Runs</div>
                        <div id="nextRuns">
                            <div class="next-run-item">Wed, Jan 1, 2025 10:00:00 AM</div>
                            <div class="next-run-item">Wed, Jan 1, 2025 10:01:00 AM</div>
                            <div class="next-run-item">Wed, Jan 1, 2025 10:02:00 AM</div>
                        </div>
                    </div>
                </div>

                <!-- Impact Warning -->
                <div class="impact-warning" style="margin-top: 20px;">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2L1 21h22L12 2zm0 3.5L19.5 19h-15L12 5.5zM11 10v4h2v-4h-2zm0 6v2h2v-2h-2z"/>
                    </svg>
                    <span>Changing the schedule will affect all future runs. The owner will be notified of this change.</span>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeCronModal()">Cancel</button>
                <div>
                    <button class="btn btn-purple" onclick="previewChange()" style="margin-right: 10px;">Preview Impact</button>
                    <button class="btn btn-primary" onclick="saveSchedule()">Save Schedule</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <svg viewBox="0 0 24 24" fill="currentColor">
            <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/>
        </svg>
        <span id="toastMessage">Schedule updated successfully!</span>
    </div>

    <script>
        // Current search being edited
        let currentSearch = {
            name: '',
            cron: '',
            owner: '',
            app: ''
        };

        // Open the cron modal
        function openCronModal(searchName, cronSchedule, owner, app) {
            currentSearch = { name: searchName, cron: cronSchedule, owner, app };

            document.getElementById('modalSearchName').textContent = searchName;
            document.getElementById('modalOwner').textContent = owner;
            document.getElementById('modalApp').textContent = app;

            // Parse the cron expression
            const parts = cronSchedule.split(' ');
            if (parts.length >= 5) {
                document.getElementById('cronMinute').value = parts[0];
                document.getElementById('cronHour').value = parts[1];
                document.getElementById('cronDayMonth').value = parts[2];
                document.getElementById('cronMonth').value = parts[3];
                document.getElementById('cronDayWeek').value = parts[4];
            }

            updateCronPreview();

            // Clear active preset
            document.querySelectorAll('.preset-btn').forEach(btn => btn.classList.remove('active'));

            document.getElementById('cronModal').classList.add('active');
        }

        // Close the modal
        function closeCronModal() {
            document.getElementById('cronModal').classList.remove('active');
        }

        // Select a preset
        function selectPreset(cron, element) {
            document.querySelectorAll('.preset-btn').forEach(btn => btn.classList.remove('active'));
            element.classList.add('active');

            const parts = cron.split(' ');
            document.getElementById('cronMinute').value = parts[0];
            document.getElementById('cronHour').value = parts[1];
            document.getElementById('cronDayMonth').value = parts[2];
            document.getElementById('cronMonth').value = parts[3];
            document.getElementById('cronDayWeek').value = parts[4];

            updateCronPreview();
        }

        // Update the cron preview
        function updateCronPreview() {
            const minute = document.getElementById('cronMinute').value || '*';
            const hour = document.getElementById('cronHour').value || '*';
            const dayMonth = document.getElementById('cronDayMonth').value || '*';
            const month = document.getElementById('cronMonth').value || '*';
            const dayWeek = document.getElementById('cronDayWeek').value || '*';

            const cron = `${minute} ${hour} ${dayMonth} ${month} ${dayWeek}`;
            document.getElementById('cronPreviewValue').textContent = cron;

            // Generate human-readable description
            const description = describeCron(minute, hour, dayMonth, month, dayWeek);
            document.getElementById('cronDescription').textContent = description;

            // Generate next runs
            generateNextRuns(minute, hour, dayMonth, month, dayWeek);
        }

        // Describe the cron expression in human-readable format
        function describeCron(minute, hour, dayMonth, month, dayWeek) {
            // Simple patterns
            if (minute === '*' && hour === '*' && dayMonth === '*' && month === '*' && dayWeek === '*') {
                return 'Runs every minute';
            }
            if (minute.startsWith('*/')) {
                const interval = minute.substring(2);
                return `Runs every ${interval} minute${interval > 1 ? 's' : ''}`;
            }
            if (minute === '0' && hour === '*') {
                return 'Runs every hour at minute 0';
            }
            if (minute === '0' && hour.startsWith('*/')) {
                const interval = hour.substring(2);
                return `Runs every ${interval} hour${interval > 1 ? 's' : ''}`;
            }
            if (minute === '0' && hour === '0' && dayMonth === '*' && month === '*' && dayWeek === '*') {
                return 'Runs daily at midnight';
            }
            if (minute === '0' && hour !== '*' && dayMonth === '*' && month === '*' && dayWeek === '*') {
                const hourNum = parseInt(hour);
                const ampm = hourNum >= 12 ? 'PM' : 'AM';
                const hour12 = hourNum % 12 || 12;
                return `Runs daily at ${hour12}:00 ${ampm}`;
            }
            if (minute === '0' && hour === '0' && dayMonth === '*' && month === '*' && dayWeek === '0') {
                return 'Runs weekly on Sunday at midnight';
            }
            if (minute === '0' && hour === '0' && dayMonth === '1' && month === '*' && dayWeek === '*') {
                return 'Runs monthly on the 1st at midnight';
            }

            // Complex pattern - build description
            let desc = 'Runs ';
            if (minute !== '*') desc += `at minute ${minute} `;
            if (hour !== '*') desc += `at hour ${hour} `;
            if (dayMonth !== '*') desc += `on day ${dayMonth} `;
            if (month !== '*') desc += `in month ${month} `;
            if (dayWeek !== '*') desc += `on weekday ${dayWeek}`;

            return desc.trim() || 'Custom schedule';
        }

        // Generate next run times
        function generateNextRuns(minute, hour, dayMonth, month, dayWeek) {
            const now = new Date();
            const runs = [];

            // Simplified next run calculation
            for (let i = 0; i < 3; i++) {
                const nextRun = new Date(now);

                if (minute === '*' || minute.startsWith('*/')) {
                    const interval = minute === '*' ? 1 : parseInt(minute.substring(2));
                    nextRun.setMinutes(nextRun.getMinutes() + (i * interval) + 1);
                    nextRun.setSeconds(0);
                } else if (hour === '*' || hour.startsWith('*/')) {
                    const hourInterval = hour === '*' ? 1 : parseInt(hour.substring(2));
                    nextRun.setHours(nextRun.getHours() + (i * hourInterval));
                    nextRun.setMinutes(parseInt(minute) || 0);
                    nextRun.setSeconds(0);
                } else {
                    nextRun.setDate(nextRun.getDate() + i);
                    nextRun.setHours(parseInt(hour) || 0);
                    nextRun.setMinutes(parseInt(minute) || 0);
                    nextRun.setSeconds(0);
                }

                runs.push(nextRun.toLocaleString('en-US', {
                    weekday: 'short',
                    month: 'short',
                    day: 'numeric',
                    year: 'numeric',
                    hour: 'numeric',
                    minute: '2-digit',
                    second: '2-digit'
                }));
            }

            const nextRunsHtml = runs.map(run => `<div class="next-run-item">${run}</div>`).join('');
            document.getElementById('nextRuns').innerHTML = nextRunsHtml;
        }

        // Preview the impact of the change
        function previewChange() {
            const cron = document.getElementById('cronPreviewValue').textContent;
            const oldCron = currentSearch.cron;

            alert(`Impact Preview:\n\nCurrent Schedule: ${oldCron}\nNew Schedule: ${cron}\n\nThis change will ${getImpactDescription(oldCron, cron)}`);
        }

        // Get impact description
        function getImpactDescription(oldCron, newCron) {
            const oldFreq = estimateFrequency(oldCron);
            const newFreq = estimateFrequency(newCron);

            if (newFreq > oldFreq) {
                return `REDUCE run frequency by ${Math.round((1 - oldFreq/newFreq) * 100)}%, saving system resources.`;
            } else if (newFreq < oldFreq) {
                return `INCREASE run frequency by ${Math.round((newFreq/oldFreq - 1) * 100)}%.`;
            }
            return 'maintain the same frequency but at different times.';
        }

        // Estimate frequency in minutes
        function estimateFrequency(cron) {
            const parts = cron.split(' ');
            const minute = parts[0];
            const hour = parts[1];

            if (minute.startsWith('*/')) return parseInt(minute.substring(2));
            if (minute === '*') return 1;
            if (hour.startsWith('*/')) return parseInt(hour.substring(2)) * 60;
            if (hour === '*') return 60;
            return 1440; // Daily
        }

        // Save the schedule
        function saveSchedule() {
            const cron = document.getElementById('cronPreviewValue').textContent;

            closeCronModal();

            // Show toast notification
            document.getElementById('toastMessage').textContent = `Schedule for "${currentSearch.name}" updated to: ${cron}`;
            const toast = document.getElementById('toast');
            toast.classList.add('show');

            setTimeout(() => {
                toast.classList.remove('show');
            }, 4000);
        }

        // Close modal on overlay click
        document.getElementById('cronModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeCronModal();
            }
        });

        // Close modal on escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeCronModal();
            }
        });
    </script>
</body>
</html>
